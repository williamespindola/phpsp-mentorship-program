#!/usr/bin/php
<?php

chdir(dirname(__DIR__));

include __DIR__ . "/../vendor/autoload.php";

use Todo\CreateTask;
use Todo\ViewTask;
use Todo\Task;

$pdo = new PDO('sqlite:todo.sqlite');
$pdo->setAttribute(
    PDO::ATTR_ERRMODE, 
    PDO::ERRMODE_EXCEPTION
);

switch ($argv[1]) {
    case 'create':
        $task = new Task($argv[2], new DateTime($argv[3]), $argv[4], $argv[5]);
        $createTask = new CreateTask($pdo);
        $createTask->create($task);
        
        echo "Task created" . PHP_EOL;

        break;
    default:
        echo "Invalid option." . PHP_EOL;
}